
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{d as e,_ as a,A as s,o,X as l,t,e as r,C as d,n,p as u,q as i,aN as m,g as p,l as c,bg as f,Y as w,az as g,bE as v,m as b}from"./index.90e3157b.js";import{E as h}from"./el-button.607a2acf.js";import{_ as j}from"./index.c20aae0a.js";import{E as y,a as _}from"./el-col.0820832a.js";import{E as x,a as E}from"./el-form-item.48de9321.js";import{E as V}from"./el-input.9d6a86cc.js";import"./index.8bfffa1c.js";import"./index2.a22147d6.js";import"./index2.f9558fe3.js";/* empty css                */import"./index.a7e17429.js";import"./typescript2.b7eef2c1.js";import"./error2.13f96d52.js";const k=e({name:"FixedActionBar"});var q=a(Object.assign(k,{setup(e){const a=s({isBottom:!0});function u(){var e=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.clientHeight||document.body.clientHeight,o=document.documentElement.scrollHeight||document.body.scrollHeight;Math.ceil(e+s)>=o?a.value.isBottom=!0:a.value.isBottom=!1}return o((()=>{u(),window.addEventListener("scroll",u)})),l((()=>{window.removeEventListener("scroll",u)})),(e,s)=>(t(),r("div",{class:n(["actionbar",{shadow:!a.value.isBottom}]),"data-fixed-calc-width":""},[d(e.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-1048a486"]]);const B=w("提交"),H=e({name:"PersonalEditPassword"}),P=Object.assign(H,{setup(e){const a=u(),o=i(),{proxy:l}=b(),d=m(),n=s({password:"",newpassword:"",checkpassword:""}),f=s({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,s)=>{a!==n.value.newpassword?s(new Error("请确认新密码")):s()}}]});function w(){l.$refs.formRef.validate((e=>{e&&d.editPassword(n.value).then((()=>{g({type:"success",message:"模拟修改成功，请重新登录"}),d.logout().then((()=>{o.push({name:"login",query:{redirect:a.fullPath}})}))})).catch((()=>{}))}))}return(e,a)=>{const s=v,o=V,l=x,d=E,u=y,i=_,m=j,g=h,b=q;return t(),r("div",null,[p(s,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),p(m,null,{default:c((()=>[p(i,null,{default:c((()=>[p(u,{md:24,lg:12},{default:c((()=>[p(d,{ref:"formRef",model:n.value,rules:f.value,"label-width":"120px"},{default:c((()=>[p(l,{label:"原密码",prop:"password"},{default:c((()=>[p(o,{modelValue:n.value.password,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),p(l,{label:"新密码",prop:"newpassword"},{default:c((()=>[p(o,{modelValue:n.value.newpassword,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),p(l,{label:"确认新密码",prop:"checkpassword"},{default:c((()=>[p(o,{modelValue:n.value.checkpassword,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),p(b,null,{default:c((()=>[p(g,{type:"primary",size:"large",onClick:w},{default:c((()=>[B])),_:1})])),_:1})])}}});"function"==typeof f&&f(P);export{P as default};
//# sourceMappingURL=edit.password.f992e107.js.map
