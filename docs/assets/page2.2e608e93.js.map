{"version":3,"file":"page2.2e608e93.js","sources":["../../src/views/01-melt-arco/page2.vue"],"sourcesContent":["<route>\n{\n    meta: {\n        layout: \"main\",\n        title: \"Arco基础示例2\",\n        parentTitle: \"MeltUI\",\n        icon: \"config\",\n        parentIcon: \"eye\",\n    }\n}\n</route>\n\n<template>\n    <ArcoCrudTable\n        class=\"mt-2\"\n        :options=\"options\"\n        :schema=\"schema\"\n        @showItem=\"showItem\"\n    />\n</template>\n\n<script setup>\nimport {\n    ArcoCrudTable,\n    FormSchema,\n    CrudOptions\n} from 'meltui'\n\nimport { Modal } from '@arco-design/web-vue'\n\nconst searchable = ref(true)\nconst editable = ref(false)\nlet options = ref(new CrudOptions()\n    .edit(editable.value) // 编辑模式\n    // .header(false).visible(false) // 不显示表头\n    .row().hover().border().stripe()\n    .size().small()\n    .layout()\n    .search(searchable.value).inline().cols().sm(1).md(2).xl(2)\n    // .row().selection().radioType()\n    // .row().selection().checkboxType().checkAll() // .currentOnly(false)\n    // .row().expand().width(50).title('展开行').render(\"{{ record.key % 2 === 1 ? '我的名字是 is' + record.name + ', 我的地址是 ' + record.address : JSON.stringify(record, null, 2)  }}\")\n    // @fix 开启虚拟列表后 复选款无法勾选 --> v-model:selected-keys\n    // .body().virtualList().height(400)\n    // .body().scroll().y(400)\n    .column().resizable()   // .body().scroll().x(1000)\n\n    .baseUrl('https://mock.apifox.cn/m1/1087009-0-default/api')\n    .fetchList().get('/v1/fetchList') // 初始化列表\n    .viewOperation().fetch().get('/v1/fetch') // 查看1条数据\n    // .editOperation().update().post('/v1/update') // 更新1条数据\n    // .editBatchOperation().updateBatch().post('/v1/updateBatch') // 批量更新\n    .addOperation().save().post('/v1/save') // 新增1条数据\n    .removeOperation()\n    .needConfirm().confirmText('确定删除吗?') // 删除前需要确认\n    .delete().post('/v1/delete') // 删除1条数据\n\n    .removeBatchOperation().deleteBatch().post('/v1/deleteBatch') // 批量删除\n    .customOperation('自定义').clickEmit('showItem') // 自定义按钮\n\n    // .customOperation(\"自定义2\").clickEmit(\"showItem\")\n    .parse())\n\nconsole.log(options.value)\n\nconst schema = ref({\n    name: new FormSchema()\n        .title('姓名').center().upperFirst()\n        .width(200)\n        .format('{{ \\'[No.\\' + (rowIndex+1)  + \\']\\' + record.name }}')\n        .readonly()\n        .column().fixed().left()\n        .input().placeholder('输入姓名').clearable()\n        .searchable() // .placeholder(\"{{ '请输入' + column.title }}\")\n        .validatable().required()\n        .parse(),\n    salary: new FormSchema()\n        .title('工资')\n        .width(150).center()\n        .inputNumber().placeholder('输入工资').clearable(false)\n        // .props({\n        //     allowClear: true\n        // })\n        .sortable().asc().desc()\n        .filterable()\n        .gt(20000)\n        .gt([25000, 1000000])\n        // .filter(\"{{ record.salary > value[0] }}\")\n        .searchable().advancedOnly() // .placeholder(\"{{ '请输入' + column.title }}\")\n        .validatable().required().min(1500)\n        .parse(),\n\n    address: new FormSchema()\n        .title('地址')\n        .width(150).left()\n        .filterable()\n        // .startsWith(\"北京海淀\").startsWith(\"35 Park Road\")\n        // .startsWith([\"北京海淀\", \"35 Park Road\"])\n        .contains(['北京', '绵阳', 'Park Road'])\n        // .filter(`{{ record.address.startsWith(value[0]) }}`) // 也可以不用写\n        .textArea().clearable()\n        .placeholder('{{ \\'请输入\\' + (record.name ? record.name + \\'的\\' : \\'\\') + \\'地址\\'}}')\n        .props({\n            autoSize: true\n        })\n        .cell().ellipsis().tooltip().width(150) // width会覆盖\n        .searchable().advancedOnly() // .placeholder(\"{{ '请输入' + column.title }}\")\n        .readonly()\n        .validatable(false).required()\n        .parse(),\n    province: new FormSchema()\n        .title('省份')\n        .width(150).center()\n        // .column().fixed().right()\n        .select({\n            province: ['北京', '四川', '广东'],\n            // 'province': ['海淀', '朝阳', '昌平'],\n            '北京': ['海淀', '朝阳', '昌平'],\n            '四川': ['成都', '绵阳'],\n            '广东': ['广州', '深圳']\n        })\n        // .props({\n        //     allowClear: true\n        // })\n        .parse(),\n    city: new FormSchema()\n        .title('城市')\n        .width(150).center()\n        // .column().fixed().right()\n        .select().keepWatch('province') // 联动\n        .parse()\n})\n\nconst showItem = argv => {\n    const { record } = argv\n    // getCurrentInstance()?.appContext.config.globalProperties.$modal.info({ title:'Name', content: record.name })\n    Modal.info({\n        title: 'Info Title',\n        content: JSON.stringify(record, null, 2)\n    })\n}\n\nwatch(() => editable.value, current => {\n    // console.log(current, prev)\n    // console.log(new CrudOptions(options.value).edit(current).parse())\n    options.value = new CrudOptions(options.value).edit(current).parse()\n    // console.log(\"更新\")\n    // console.log(JSON.stringify(options.value))\n}, {\n    deep: true\n})\nwatch(() => searchable.value, current => {\n    // console.log(current, prev)\n    // console.log(new CrudOptions(options.value).edit(current).parse())\n    options.value = new CrudOptions(options.value).search(current).parse()\n    // console.log(\"更新\")\n    // console.log(JSON.stringify(options.value))\n}, {\n    deep: true\n})\n\n</script>\n"],"names":["searchable","ref","editable","options","CrudOptions","edit","value","row","hover","border","stripe","size","small","layout","search","inline","cols","sm","md","xl","column","resizable","baseUrl","fetchList","get","viewOperation","fetch","addOperation","save","post","removeOperation","needConfirm","confirmText","delete","removeBatchOperation","deleteBatch","customOperation","clickEmit","parse","schema","name","FormSchema","title","center","upperFirst","width","format","readonly","fixed","left","input","placeholder","clearable","validatable","required","salary","inputNumber","sortable","asc","desc","filterable","gt","advancedOnly","min","address","contains","textArea","props","autoSize","cell","ellipsis","tooltip","province","select","city","keepWatch","showItem","argv","record","Modal","info","content","JSON","stringify","watch","current","deep"],"mappings":"+KA8BA,MAAAA,EAAAC,GAAA,GACAC,EAAAD,GAAA,GACA,IAAAE,EAAAF,GAAA,IAAAG,GACAC,KAAAH,EAAAI,OAEAC,MAAAC,QAAAC,SAAAC,SACAC,OAAAC,QACAC,SACAC,OAAAd,EAAAM,OAAAS,SAAAC,OAAAC,GAAA,GAAAC,GAAA,GAAAC,GAAA,GAOAC,SAAAC,YAEAC,QAAA,mDACAC,YAAAC,IAAA,iBACAC,gBAAAC,QAAAF,IAAA,aAGAG,eAAAC,OAAAC,KAAA,YACAC,kBACAC,cAAAC,YAAA,UACAC,SAAAJ,KAAA,cAEAK,uBAAAC,cAAAN,KAAA,mBACAO,gBAAA,OAAAC,UAAA,YAGAC,SAIA,MAAAC,EAAAtC,EAAA,CACAuC,MAAA,IAAAC,GACAC,MAAA,MAAAC,SAAAC,aACAC,MAAA,KACAC,OAAA,oDACAC,WACA3B,SAAA4B,QAAAC,OACAC,QAAAC,YAAA,QAAAC,YACApD,aACAqD,cAAAC,WACAhB,QACAiB,QAAA,IAAAd,GACAC,MAAA,MACAG,MAAA,KAAAF,SACAa,cAAAL,YAAA,QAAAC,WAAA,GAIAK,WAAAC,MAAAC,OACAC,aACAC,GAAA,KACAA,GAAA,CAAA,KAAA,MAEA7D,aAAA8D,eACAT,cAAAC,WAAAS,IAAA,MACAzB,QAEA0B,SAAA,IAAAvB,GACAC,MAAA,MACAG,MAAA,KAAAI,OACAW,aAGAK,SAAA,CAAA,KAAA,KAAA,cAEAC,WAAAd,YACAD,YAAA,8DACAgB,MAAA,CACAC,UAAA,IAEAC,OAAAC,WAAAC,UAAA1B,MAAA,KACA7C,aAAA8D,eACAf,WACAM,aAAA,GAAAC,WACAhB,QACAkC,UAAA,IAAA/B,GACAC,MAAA,MACAG,MAAA,KAAAF,SAEA8B,OAAA,CACAD,SAAA,CAAA,KAAA,KAAA,MAEA,KAAA,CAAA,KAAA,KAAA,MACA,KAAA,CAAA,KAAA,MACA,KAAA,CAAA,KAAA,QAKAlC,QACAoC,MAAA,IAAAjC,GACAC,MAAA,MACAG,MAAA,KAAAF,SAEA8B,SAAAE,UAAA,YACArC,UAGAsC,EAAAC,IACA,MAAAC,OAAAA,GAAAD,EAEAE,EAAAC,KAAA,CACAtC,MAAA,aACAuC,QAAAC,KAAAC,UAAAL,EAAA,KAAA,aAIAM,GAAA,IAAAlF,EAAAI,QAAA+E,IAGAlF,EAAAG,MAAA,IAAAF,EAAAD,EAAAG,OAAAD,KAAAgF,GAAA/C,UAGA,CACAgD,MAAA,IAEAF,GAAA,IAAApF,EAAAM,QAAA+E,IAGAlF,EAAAG,MAAA,IAAAF,EAAAD,EAAAG,OAAAQ,OAAAuE,GAAA/C,UAGA,CACAgD,MAAA"}